<!DOCTYPE html>
<html>
<head>
    <title>Inventory Management System</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        input { padding: 5px; margin-right: 5px; width: 80px; }
        button { padding: 5px 10px; margin-right: 5px; }
    </style>
</head>
<body>
    <h2>Inventory Management System</h2>
    <div>
        <input type="text" id="name" placeholder="Item Name">
        <input type="number" id="quantity" placeholder="Quantity">
        <input type="number" id="price" placeholder="Price">
        <button onclick="addItem()">Add Item</button>
    </div>
    <table>
        <thead>
            <tr>
                <th>ID</th><th>Name</th><th>Quantity</th><th>Price</th><th>Actions</th>
            </tr>
        </thead>
        <tbody id="inventoryTable"></tbody>
    </table>

    <script>
        async function fetchInventory() {
            const res = await fetch('/api/items');
            const data = await res.json();
            const tbody = document.getElementById('inventoryTable');
            tbody.innerHTML = '';
            data.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${item.id}</td>
                    <td>${item.name}</td>
                    <td><input type="number" value="${item.quantity}" onchange="updateItem(${item.id}, this.value, null)"></td>
                    <td><input type="number" value="${item.price}" onchange="updateItem(${item.id}, null, this.value)"></td>
                    <td><button onclick="deleteItem(${item.id})">Delete</button></td>
                `;
                tbody.appendChild(tr);
            });
        }

        async function addItem() {
            const name = document.getElementById('name').value;
            const quantity = parseInt(document.getElementById('quantity').value);
            const price = parseFloat(document.getElementById('price').value);
            await fetch('/api/items', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name, quantity, price })
            });
            document.getElementById('name').value = '';
            document.getElementById('quantity').value = '';
            document.getElementById('price').value = '';
            fetchInventory();
        }

        async function updateItem(id, quantity, price) {
            await fetch(`/api/items/${id}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 
                    quantity: quantity ? parseInt(quantity) : undefined, 
                    price: price ? parseFloat(price) : undefined 
                })
            });
            fetchInventory();
        }

        async function deleteItem(id) {
            await fetch(`/api/items/${id}`, { method: 'DELETE' });
            fetchInventory();
        }

        fetchInventory();
    </script>
</body>
</html>
